<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Listado de empleados</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
		integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" th:href="@{/css/menu.css}">
	<link rel="stylesheet" type="text/css" th:href="@{/css/frm.css}">
	<link rel="stylesheet" type="text/css" th:href="@{/css/tablas.css}">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css" />
</head>

<body>

	<header th:replace="index::header"></header>

	<main layout:fragment="contenido">
		<div class="main-panel">
			<div class="content-wrapper">
				<a class="btn btn-warning btn-sm" th:href="@{/compra}"><i class='bx bx-arrow-back btn-warning' ></i></a>				
				<div class="col-lg-12 grid-margin stretch-card pt-3">
					
					<div class="card">
						<div class="card-body">
							<h1 class="card-title">INGRESE LOS PRODUCTOS A COMPRAR</h1>
							<div th:classappend="'alert-' + (${clase != null} ? ${clase} : info)"
								th:if="${mensaje != null}" th:text="${mensaje}" class="alert">
							</div>
							<form th:object="${producto}" th:action="@{/comprar/agregar}" method="post">
								<div class="form-group">
									<label for="codigo">PRODUCTOS </label>
									<select th:field="*{COD}" class="js-example-basic-single" style="width: 100%">
										<option th:each="producto: ${productos}" th:value="${producto.COD}"
											th:text="${producto.DESCRIPCION}"></option>
									</select>
									
									
									
									<button type="submit" class="btn btn-success mt-3">
										Agregar&nbsp;</button>
								</div>
							</form>
							
							<form class="mt-2" th:object="${compra}" th:action="@{/comprar/terminar}" method="post">
								
								<label>EMPLEADO </label> <select th:field="*{COD_EMPLEADO}"
									class="js-example-basic-single" style="width: 40%">
									<option th:each="empleado: ${empleados}" th:value="${empleado.COD_EMPLEADO}"
										th:text="${empleado.NOMBRE}"></option>
										</select>
								<label class="mt-3">PROVEEDOR </label> <select th:field="*{COD_PROVEEDOR}"
									class="js-example-basic-single" style="width: 40%">
									<option th:each="proveedor: ${proveedores}" th:value="${proveedor.COD_PROVEEDOR}"
										th:text="${proveedor.NOMBRE}"></option>
								</select>
								<br>
								<button type="submit" class="btn btn-success">
									Terminar</button>
								<a th:href="@{/comprar/limpiar}" class="btn btn-danger">Cancelar
									venta</a> &nbsp;&nbsp;&nbsp;
							</form>
							
							
							<h1 th:text="${'Total: ' + total}"></h1>
							<div class="table-responsive">
								<table class="table table-bordered">
									<thead>
										<tr>
											<th>Codigo</th>
											<th>Nombre</th>
											<th>Precio</th>
											<th>Cantidad</th>
											<th>Total</th>
											<th>Quitar de lista</th>
										</tr>
									</thead>
									<tbody>
										<tr th:each="producto, iterador : ${session.carrito}">
											<td th:text="${producto.COD}"></td>
											<td th:text="${producto.DESCRIPCION}"></td>
											<td th:text="${producto.STOCK}"></td>
											<td th:text="${producto.cantidad}"></td>
											<td th:text="${producto.total}"></td>
											<td>
												<form th:action="@{/comprar/quitar/} + ${iterador.index}" method="post">
													<button type="submit" class="btn btn-danger"><i
															class="fa fa-trash"></i>
													</button>
												</form>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>

		</div>
	</main>
							
	


	<script th:src="@{/js/menu.js}"></script>

</body>

</html>